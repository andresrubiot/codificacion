<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="shortcut icon" href="images/favicon.jpg">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Codificacion</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
	<link href="css/justified-nav.css" rel="stylesheet">

	<style type="text/css">
		.border-nav-top
		{
			border-radius: 5px 5px 0px 0px !important;
			margin-bottom: 0px !important;
		}
		.background
		{
			background:#1A2D3F;
			border:0px solid #1A2D3F;
			border-radius: 0px 0px 5px 5px !important;
			color: #FFF;
		}
	</style>

</head>
<body>

	<div class="container">

		<nav class="navbar navbar-default border-nav-top">
		  <div class="container-fluid">
		    <!-- Brand and toggle get grouped for better mobile display -->
		    <div class="navbar-header">
		      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
		        <span class="sr-only">Toggle navigation</span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		      </button>
		      <a class="navbar-brand" href="#">Codificaci√≥n | NRZI</a>
		    </div>

		    <!-- Collect the nav links, forms, and other content for toggling -->
		    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		      <ul class="nav navbar-nav">
		        <li><a href="index.html">Inicio</a></li>
		        <li><a href="NRZ.html">NRZ <span class="sr-only">(current)</span></a></li>
		        <li><a href="manchester.html">Manchester</a></li>
		        <li class="active"><a href="nrzi.html">NRZI</a></li>
		        <li><a href="4b5b.html">4b/5b</a></li>
		      </ul>
		    </div><!-- /.navbar-collapse -->
		  </div><!-- /.container-fluid -->
		</nav>

	  <!-- Jumbotron -->
	  <div class="jumbotron background">
	    <p class="lead" style="font-size:30px;">
	    	NRZI
	    </p>
	  </div>

	  <!-- Example row of columns -->
	  <div class="row">
	    
	    <div class="col-lg-12">
	    	<form>
		      <div class="input-group">
					  <span class="input-group-addon" id="basic-addon1">(0 / 1)</span>
					  <input type="text" id="patron" class="form-control" placeholder="Ingrese el dato Binario" aria-describedby="basic-addon1" onkeypress="return validarn(event)">
					</div><br>
					<div class="input-group">
					  <span class="input-group-addon" id="basic-addon1">(5 bits)</span>
					  <input type="text" id="convertido" class="form-control" placeholder="Valor Convertido" aria-describedby="basic-addon1" readonly="true">
					</div><br>
	      	<p><a class="btn btn-primary" href="#" role="button" onclick="convertir();"> Ejecutar &raquo;</a></p>
	    	</form>
	    </div>
	    <div class="col-lg-12">
	    	<canvas id="micanvas" width="1000" height="100">
					Este texto se muestra para los navegadores no compatibles con canvas.
					<br>
					Por favor, utiliza Firefox, Chrome, Safari u Opera.
				</canvas>
	    </div>
	    
	  </div>

	  <!-- Site footer -->
	  <footer class="footer">
	    <p>
	    	ELIANA GOMEZ<br>
	    	KELLY CARDOZO<br>
	    	TELECOMUNICACIONES II
	    </p>
	  </footer>

	</div> <!-- /container -->

<script src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.js"></script>

<script>
	function validarn(e) {
		tecla = (document.all) ? e.keyCode : e.which;
   	if (tecla==8) return true;
		if (tecla==9) return true;
		if (tecla==11) return true;
    patron = /[01]/;
    te = String.fromCharCode(tecla);
    return patron.test(te);
	}

	function convertir(){
		numero=document.getElementById("patron").value;
		cant=document.getElementById("patron").value.length;
		cant4=numero.split("");
		var num4='';
		var numConver='';
		var nuevoNum='';
		for (var i = 0; i < cant; i++) {
			num4=num4+cant4[i];
			if (num4.length==4) {
				switch(num4){
					case '0000':
						nuevoNum="11110";
						break;
					case '0001':
						nuevoNum="01001";
						break;
					case '0010':
						nuevoNum="10100";
						break;
					case '0011':
						nuevoNum="10101";
						break;
					case '0100':
						nuevoNum="01010";
						break;
					case '0101':
						nuevoNum="01011";
						break;
					case '0110':
						nuevoNum="01110";
						break;
					case '0111':
						nuevoNum="01111";
						break;
					case '1000':
						nuevoNum="10010";
						break;
					case '1001':
						nuevoNum="10011";
						break;
					case '1010':
						nuevoNum="10110";
						break;
					case '1011':
						nuevoNum="10111";
						break;
					case '1100':
						nuevoNum="11010";
						break;
					case '1101':
						nuevoNum="11011";
						break;
					case '1110':
						nuevoNum="11100";
						break;
					case '1111':
						nuevoNum="11101";
						break;
				}
				numConver=numConver+nuevoNum;
				document.getElementById('convertido').value=numConver;
				alert(num4);
				num4='';
			}
		}
		canvas();
	}

	function set_canvas(num){
		numero=document.getElementById('convertido').value;
		document.getElementById('convertido').value=numero+num;
		canvas();
	}

	function canvas(){
		draw=document.getElementById('convertido').value;
		limite2=document.getElementById('convertido').value.length;
		limite=limite2+1;
		var binario = draw.split("");
		//dibujo en canvas
		//Recibimos el elemento canvas
		var canvas = document.getElementById('micanvas');
		//Accedo al contexto de '2d' de este canvas, necesario para dibujar
		var contexto = canvas.getContext('2d');
		//Dibujo en el contexto del canvas

		//para el cero, solo ampliarle 50 al primer parametro
		num=0;
		inc=50;
		for (var i = 0; i < limite; i++) {
			contexto.fillRect(num, 0, 1, 80);//|||
			num=num+inc;
		}

		num=0;
		inc=50;
		for (var i = 0; i < limite2 ; i++) {
			var flag=0;
			var ant=i-1;
			
			if (binario[ant]==1 && binario[i]==0) {
				binario[i]=1;
				flag=1;
			}

			if (binario[ant]==1 && binario[i]==1 && flag!=1) {
				binario[i]=0;
				contexto.fillRect(num-2, 10, 5, 55);//|
			}
			if (binario[ant]==0 && binario[i]==1) {
				contexto.fillRect(num-2, 10, 5, 55);//|
			}

			if (binario[i]==0) {
				contexto.fillRect(num, 	60, 50, 5);//__
			}
			if (binario[i]==1) {
				contexto.fillRect(num, 10, 50, 5);//--			
			}
			num=num+inc;
			}
		}	

</script>

</body>
</html>